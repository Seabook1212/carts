server.port=${port:8081}
# spring.data.mongodb.uri=mongodb://${db:carts-db}:27017/data
spring.data.mongodb.uri=mongodb://carts-db.sock-shop.svc.cluster.local:27017/data?socketTimeoutMS=30000&connectTimeoutMS=10000&serverSelectionTimeoutMS=10000&maxPoolSize=50
spring.data.mongodb.connection-per-host=10

# Spring Boot 3: endpoints.health.enabled is now management.endpoint.health.enabled
management.endpoint.health.enabled=true

# Spring Boot 3: Tracing configuration (replaces Spring Cloud Sleuth)
management.tracing.sampling.probability=1.0
management.zipkin.tracing.endpoint=http://${zipkin_host:jaeger-collector.observability.svc.cluster.local}:9411/api/v2/spans
spring.application.name=carts
# Disable actuator metrics endpoints
# endpoints.metrics.enabled=false
# endpoints.prometheus.id=metrics

# management.endpoints.web.exposure.include=*
management.endpoints.web.exposure.include=prometheus
management.endpoint.prometheus.enabled=true

management.metrics.export.prometheus.enabled=true

# Logging pattern with explicit traceId and spanId labels
logging.pattern.level=%5p [${spring.application.name:},traceId:%X{traceId:-},spanId:%X{spanId:-}]
logging.pattern.console=%d{yyyy-MM-dd'T'HH:mm:ss.SSSXXX} %5p [${spring.application.name:},traceId:%X{traceId:-},spanId:%X{spanId:-}] --- [%15.15t] %-40.40logger{39} : %m%n

# logging.level.io.micrometer=DEBUG
# logging.level.org.springframework.boot.actuate=DEBUG
